<!DOCTYPE html>
<html lang="vi">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hệ thống Quản lý Kho - Đại Long Foods</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background-color: #f5f5f5;
                display: flex;
                height: 100vh;
                overflow: hidden;
            }
    
            /* Sidebar Menu */
            .sidebar {
                width: 260px;
                background: #ffffff;
                border-right: 1px solid #ddd;
                display: flex;
                flex-direction: column;
                overflow-y: auto;
            }
            .logo-section {
                padding: 20px;
                background: linear-gradient(135deg, #a32718 0%, #8a2114 100%);
                color: white;
                text-align: center;
                border-bottom: 3px solid #ecc67d;
            }
            .logo-section h2 {
                font-size: 16px;
                font-weight: 600;
                margin-bottom: 4px;
            }
            .logo-section p {
                font-size: 11px;
                opacity: 0.9;
            }
            .menu-section {
                border-bottom: 1px solid #eee;
            }
            .menu-title {
                font-weight: bold;
                font-size: 13px;
                color: #a32718;
                padding: 12px 16px;
                cursor: pointer;
                background: #fff;
                display: flex;
                justify-content: space-between;
                align-items: center;
                transition: all 0.2s;
            }
            .menu-title:hover {
                background-color: #f1e8e3;
            }
            .menu-item {
                font-size: 13px;
                color: #555;
                padding: 8px 32px;
                cursor: pointer;
                display: none;
                transition: all 0.2s;
            }
            .menu-item:hover {
                background-color: #f1e8e3;
                padding-left: 36px;
            }
            .menu-item.active {
                background-color: #f1e8e3;
                color: #a32718;
                font-weight: 600;
                border-left: 3px solid #a32718;
                padding-left: 29px;
            }
            .menu-section.active .menu-item {
                display: block;
            }
            .menu-section.active .menu-title::after {
                content: "−";
            }
            .menu-title::after {
                content: "";
                font-weight: bold;
                font-size: 16px;
            }
    
            /* Main Content */
            .content {
                flex: 1;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }
            header {
                background: linear-gradient(135deg, #a32718 0%, #8a2114 100%);
                color: white;
                padding: 16px 24px;
                font-weight: 600;
                font-size: 16px;
                border-bottom: 4px solid #ecc67d;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .header-info {
                display: flex;
                align-items: center;
                gap: 20px;
                font-size: 13px;
            }
            .header-info span {
                opacity: 0.95;
            }
            .main-content {
                flex: 1;
                background: #f5f5f5;
                padding: 24px;
                overflow-y: auto;
            }
    
            /* Page Header */
            .page-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                background: #fff;
                padding: 16px 20px;
                border-radius: 4px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            }
            .page-title {
                font-size: 18px;
                font-weight: 600;
                color: #333;
            }
            .breadcrumb {
                font-size: 12px;
                color: #999;
                margin-top: 4px;
            }
            .header-actions {
                display: flex;
                gap: 12px;
            }
    
            /* Buttons */
            .btn-add {
                background-color: #a32718;
                color: #ffffff;
                border: none;
                padding: 10px 20px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                display: flex;
                align-items: center;
                gap: 6px;
                transition: all 0.3s;
                position: relative;
            }
            .btn-add:hover {
                background-color: #27ae60;
                transform: translateY(-1px);
                box-shadow: 0 4px 8px rgba(39,174,96,0.3);
            }
            .btn-secondary {
                background-color: #fff;
                color: #a32718;
                border: 1px solid #a32718;
                padding: 10px 20px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                display: flex;
                align-items: center;
                gap: 6px;
                transition: all 0.3s;
            }
            .btn-secondary:hover {
                background-color: #f1e8e3;
                transform: translateY(-1px);
            }
    
            /* Dropdown Menu */
            .dropdown-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                background: white;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                min-width: 220px;
                z-index: 1000;
                margin-top: 4px;
            }
            .dropdown-menu.active {
                display: block;
            }
            .dropdown-item {
                padding: 12px 16px;
                font-size: 13px;
                color: #333;
                cursor: pointer;
                border-bottom: 1px solid #f0f0f0;
                transition: all 0.2s;
                display: flex;
                align-items: center;
                gap: 8px;
            }
            .dropdown-item:last-child {
                border-bottom: none;
            }
            .dropdown-item:hover {
                background-color: #f9f9f9;
                color: #a32718;
                padding-left: 20px;
            }
    
            /* Stats Cards */
            .stats-grid {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 16px;
                margin-bottom: 24px;
            }
            .stat-card {
                background: #fff;
                border-radius: 8px;
                padding: 20px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.08);
                transition: all 0.3s;
                border-left: 4px solid transparent;
            }
            .stat-card:hover {
                transform: translateY(-4px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            }
            .stat-card.blue { border-left-color: #2196F3; }
            .stat-card.green { border-left-color: #27ae60; }
            .stat-card.orange { border-left-color: #f39c12; }
            .stat-card.red { border-left-color: #dc3545; }
            .stat-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 12px;
            }
            .stat-title {
                font-size: 13px;
                color: #666;
                font-weight: 500;
            }
            .stat-icon {
                width: 40px;
                height: 40px;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
            }
            .stat-icon.blue { background: #e3f2fd; }
            .stat-icon.green { background: #e8f5e9; }
            .stat-icon.orange { background: #fff3e0; }
            .stat-icon.red { background: #ffebee; }
            .stat-value {
                font-size: 28px;
                font-weight: 600;
                color: #333;
                margin-bottom: 8px;
            }
            .stat-change {
                font-size: 12px;
                color: #666;
            }
            .stat-change.up {
                color: #27ae60;
            }
            .stat-change.down {
                color: #dc3545;
            }
    
            /* Content Card */
            .content-card {
                background: #fff;
                border-radius: 4px;
                padding: 20px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.08);
                margin-bottom: 20px;
            }
            .section-title {
                font-size: 15px;
                font-weight: 600;
                color: #333;
                margin-bottom: 16px;
                padding-bottom: 8px;
                border-bottom: 2px solid #e0e0e0;
            }
    
            /* Search & Filter */
            .toolbar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 16px;
                gap: 12px;
            }
            .search-box {
                display: flex;
                align-items: center;
                border: 1px solid #ccc;
                border-radius: 4px;
                padding: 8px 12px;
                background: #fff;
                flex: 1;
                max-width: 400px;
                transition: all 0.2s;
            }
            .search-box:focus-within {
                border-color: #a32718;
                box-shadow: 0 0 0 2px rgba(163,39,24,0.1);
            }
            .search-box input {
                border: none;
                outline: none;
                flex: 1;
                font-size: 13px;
            }
            .search-icon {
                color: #999;
                margin-right: 8px;
            }
            .filter-group {
                display: flex;
                gap: 8px;
            }
            .filter-btn {
                background: #fff;
                border: 1px solid #ddd;
                padding: 8px 16px;
                border-radius: 4px;
                font-size: 13px;
                cursor: pointer;
                transition: all 0.2s;
            }
            .filter-btn:hover,
            .filter-btn.active {
                background: #a32718;
                color: white;
                border-color: #a32718;
            }
    
            /* Table */
            table {
                width: 100%;
                border-collapse: collapse;
                font-size: 13px;
                background: #fff;
            }
            thead {
                background-color: #f9f9f9;
            }
            th {
                border: 1px solid #e0e0e0;
                padding: 12px;
                text-align: left;
                font-weight: 600;
                color: #333;
                white-space: nowrap;
            }
            td {
                border: 1px solid #e0e0e0;
                padding: 12px;
                color: #555;
            }
            tbody tr {
                transition: all 0.2s;
            }
            tbody tr:hover {
                background-color: #f9f9f9;
            }
            .doc-code {
                color: #2196F3;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.2s;
            }
            .doc-code:hover {
                text-decoration: underline;
                color: #1976D2;
            }
    
            /* Status Badge */
            .status-badge {
                display: inline-block;
                padding: 4px 12px;
                border-radius: 12px;
                font-size: 11px;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            .status-badge.wait { background: #fff3cd; color: #856404; }
            .status-badge.processing { background: #cce5ff; color: #004085; }
            .status-badge.success { background: #d4edda; color: #155724; }
            .status-badge.danger { background: #f8d7da; color: #721c24; }
            .status-badge.warning { background: #fff3cd; color: #856404; }
            .status-badge.info { background: #d1ecf1; color: #0c5460; }
    
            /* Modal */
            .modal-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.6);
                z-index: 1000;
                align-items: center;
                justify-content: center;
            }
            .modal-overlay.active {
                display: flex;
            }
            .modal {
                background: white;
                border-radius: 8px;
                width: 90%;
                max-width: 1200px;
                max-height: 90vh;
                overflow: hidden;
                display: flex;
                flex-direction: column;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
                animation: modalSlideIn 0.3s ease;
            }
            @keyframes modalSlideIn {
                from {
                    opacity: 0;
                    transform: translateY(-50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            .modal-header {
                padding: 20px 24px;
                border-bottom: 1px solid #e0e0e0;
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: linear-gradient(135deg, #f9f9f9 0%, #ffffff 100%);
            }
            .modal-header h2 {
                font-size: 18px;
                font-weight: 600;
                color: #333;
            }
            .modal-close {
                background: transparent;
                border: none;
                font-size: 28px;
                color: #999;
                cursor: pointer;
                padding: 0;
                width: 32px;
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 4px;
                transition: all 0.2s;
            }
            .modal-close:hover {
                background: #f5f5f5;
                color: #333;
            }
            .modal-body {
                padding: 24px;
                overflow-y: auto;
                flex: 1;
            }
            .modal-body::-webkit-scrollbar {
                width: 8px;
            }
            .modal-body::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            .modal-body::-webkit-scrollbar-thumb {
                background: #888;
                border-radius: 4px;
            }
            .modal-body::-webkit-scrollbar-thumb:hover {
                background: #555;
            }
    
            /* Form Elements */
            .form-row {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
                margin-bottom: 20px;
            }
            .form-row.triple {
                grid-template-columns: 1fr 1fr 1fr;
            }
            .form-row.full {
                grid-template-columns: 1fr;
            }
            .form-group {
                margin-bottom: 0;
            }
            .form-label {
                display: block;
                font-size: 13px;
                color: #333;
                margin-bottom: 8px;
                font-weight: 500;
            }
            .form-label .required {
                color: #dc3545;
                margin-left: 2px;
            }
            .form-input {
                width: 100%;
                padding: 10px 12px;
                border: 1px solid #ccc;
                border-radius: 4px;
                font-size: 13px;
                outline: none;
                transition: all 0.2s;
            }
            .form-input:focus {
                border-color: #a32718;
                border-width: 2px;
                padding: 9px 11px;
            }
            .form-select {
                width: 100%;
                padding: 10px 12px;
                border: 1px solid #ccc;
                border-radius: 4px;
                font-size: 13px;
                outline: none;
                cursor: pointer;
                background: white;
                appearance: none;
                background-image: url("data:image/svgxml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
                background-repeat: no-repeat;
                background-position: right 12px center;
                padding-right: 36px;
                transition: all 0.2s;
            }
            .form-select:focus {
                border-color: #a32718;
                border-width: 2px;
                padding: 9px 11px;
                padding-right: 35px;
            }
            .input-with-action {
                display: flex;
                gap: 8px;
            }
            .input-with-action .form-select,
            .input-with-action .form-input {
                flex: 1;
            }
            .btn-icon {
                background: #fff;
                border: 1px solid #ccc;
                color: #666;
                padding: 10px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                display: flex;
                align-items: center;
                justify-content: center;
                min-width: 40px;
                transition: all 0.2s;
            }
            .btn-icon:hover {
                background: #f5f5f5;
                border-color: #999;
            }
            .info-box {
                background: #e3f2fd;
                border-left: 4px solid #2196F3;
                padding: 12px 16px;
                border-radius: 4px;
                margin-bottom: 20px;
                font-size: 13px;
                color: #1565C0;
            }
            .info-box strong {
                display: block;
                margin-bottom: 4px;
            }
    
            /* Detail Table */
            .detail-table {
                width: 100%;
                border-collapse: collapse;
                font-size: 13px;
                margin-top: 12px;
            }
            .detail-table thead {
                background-color: #f0f0f0;
            }
            .detail-table th {
                border: 1px solid #e0e0e0;
                padding: 10px;
                text-align: left;
                font-weight: 600;
                color: #333;
                font-size: 12px;
            }
            .detail-table td {
                border: 1px solid #e0e0e0;
                padding: 8px 10px;
                color: #555;
            }
            .detail-table input,
            .detail-table select {
                width: 100%;
                padding: 6px 8px;
                border: 1px solid #ccc;
                border-radius: 3px;
                font-size: 12px;
            }
            .btn-add-row {
                background: transparent;
                border: none;
                color: #a32718;
                padding: 8px 0;
                cursor: pointer;
                font-size: 13px;
                font-weight: 500;
                display: flex;
                align-items: center;
                gap: 6px;
                margin-top: 8px;
                transition: all 0.2s;
            }
            .btn-add-row:hover {
                color: #27ae60;
            }
            .btn-delete-row {
                background: transparent;
                border: none;
                color: #dc3545;
                cursor: pointer;
                font-size: 16px;
                padding: 2px 6px;
                transition: all 0.2s;
            }
            .btn-delete-row:hover {
                color: #a71d2a;
            }
    
            /* Modal Footer */
            .modal-footer {
                padding: 16px 24px;
                border-top: 1px solid #e0e0e0;
                display: flex;
                justify-content: flex-end;
                gap: 12px;
                background: #f9f9f9;
            }
            .btn-cancel {
                background: #fff;
                color: #666;
                border: 1px solid #ccc;
                padding: 10px 20px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.2s;
            }
            .btn-cancel:hover {
                background: #f5f5f5;
                border-color: #999;
            }
            .btn-save {
                background: #a32718;
                color: #ffffff;
                border: none;
                padding: 10px 20px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.3s;
            }
            .btn-save:hover {
                background: #27ae60;
            }
            .btn-save-add {
                background: #2196F3;
                color: #ffffff;
                border: none;
                padding: 10px 20px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.3s;
            }
            .btn-save-add:hover {
                background: #1976D2;
            }
    
            /* FEFO Suggestion Box */
            .fefo-suggestion {
                background: #fff3cd;
                border: 1px solid #ffc107;
                border-radius: 4px;
                padding: 12px;
                margin: 12px 0;
            }
            .fefo-suggestion strong {
                color: #856404;
                display: block;
                margin-bottom: 8px;
            }
            .fefo-item {
                background: white;
                padding: 8px;
                margin: 4px 0;
                border-radius: 3px;
                border-left: 3px solid #ffc107;
                font-size: 12px;
            }
    
            /* Empty State */
            .empty-state {
                text-align: center;
                padding: 60px 20px;
                color: #999;
            }
            .empty-state-icon {
                font-size: 64px;
                margin-bottom: 16px;
                opacity: 0.3;
            }
            .empty-state-text {
                font-size: 14px;
            }
    
            /* Action Buttons */
            .action-btns {
                display: flex;
                gap: 8px;
            }
            .btn-edit, .btn-delete, .btn-view {
                background: transparent;
                border: none;
                cursor: pointer;
                padding: 4px 8px;
                font-size: 14px;
                color: #666;
                transition: all 0.2s;
            }
            .btn-edit:hover {
                color: #a32718;
            }
            .btn-delete:hover {
                color: #dc3545;
            }
            .btn-view:hover {
                color: #2196F3;
            }
    
            /* Tab Content */
            .tab-content {
                display: none;
            }
            .tab-content.active {
                display: block;
                animation: fadeIn 0.3s ease;
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
    
            /* Radio Group */
            .radio-group {
                display: flex;
                gap: 20px;
                align-items: center;
            }
            .radio-item {
                display: flex;
                align-items: center;
                gap: 8px;
            }
            .radio-item input[type="radio"] {
                width: 16px;
                height: 16px;
                cursor: pointer;
            }
            .radio-item label {
                font-size: 13px;
                color: #333;
                cursor: pointer;
                margin-bottom: 0;
            }
    
            /* Lot/Batch Info */
            .lot-info {
                display: flex;
                gap: 20px;
                flex-wrap: wrap;
                margin: 12px 0;
            }
            .lot-item {
                background: #f9f9f9;
                padding: 8px 12px;
                border-radius: 4px;
                font-size: 12px;
                border-left: 3px solid #2196F3;
            }
            .lot-item strong {
                display: block;
                color: #333;
                margin-bottom: 2px;
            }
            .lot-item span {
                color: #666;
            }
        </style>
    </head>
<body>

<!-- Sidebar Menu -->
<div class="sidebar">
        <div class="logo-section">
            <h2>🏭 ĐẠI LONG FOODS</h2>
            <p>Warehouse Management System</p>
        </div>
    
        <div class="menu-section active">
            <div class="menu-title">📊 Dashboard</div>
            <div class="menu-item active" data-tab="dashboard">Tổng quan</div>
            <div class="menu-item" data-tab="kpi">KPI & Hiệu suất</div>
        </div>
    
        <div class="menu-section">
            <div class="menu-title">📦 Quản lý Tồn kho</div>
            <div class="menu-item" data-tab="inventory">Danh sách hàng hóa</div>
            <div class="menu-item" data-tab="inventory-location">Tồn kho theo vị trí</div>
            <div class="menu-item" data-tab="inventory-lot">Tồn kho theo Lot/Batch</div>
        </div>
    
        <div class="menu-section">
            <div class="menu-title">📥 Nhập kho</div>
            <div class="menu-item" data-tab="receipt-list">Danh sách phiếu nhập</div>
            <div class="menu-item" data-tab="receipt-ncc">Nhập từ NCC</div>
            <div class="menu-item" data-tab="receipt-sx">Nhập TP từ Sản xuất</div>
            <div class="menu-item" data-tab="receipt-other">Nhập khác</div>
        </div>
    
        <div class="menu-section">
            <div class="menu-title">📤 Xuất kho</div>
            <div class="menu-item" data-tab="issue-list">Danh sách phiếu xuất</div>
            <div class="menu-item" data-tab="issue-production">Xuất NVL cho SX</div>
            <div class="menu-item" data-tab="issue-sale">Xuất TP bán hàng</div>
            <div class="menu-item" data-tab="issue-transfer">Xuất chuyển kho</div>
        </div>
    
        <div class="menu-section">
            <div class="menu-title">📋 Yêu cầu Vật tư</div>
            <div class="menu-item" data-tab="request-list">Danh sách YCVT</div>
            <div class="menu-item" data-tab="request-create">Tạo YCVT mới</div>
        </div>
    
        <div class="menu-section">
            <div class="menu-title">🔍 Kiểm tra QC</div>
            <div class="menu-item" data-tab="qc-queue">Queue kiểm tra</div>
            <div class="menu-item" data-tab="qc-history">Lịch sử QC</div>
            <div class="menu-item" data-tab="spkph">SPKPH</div>
        </div>
    
        <div class="menu-section">
            <div class="menu-title">📊 Kiểm kê</div>
            <div class="menu-item" data-tab="stocktake-create">Tạo kế hoạch kiểm kê</div>
            <div class="menu-item" data-tab="stocktake-list">Danh sách kiểm kê</div>
        </div>
    
        <div class="menu-section">
            <div class="menu-title">📈 Báo cáo</div>
            <div class="menu-item" data-tab="report-inventory">Xuất Nhập Tồn</div>
            <div class="menu-item" data-tab="report-fefo">Báo cáo FEFO</div>
            <div class="menu-item" data-tab="report-warehouse">Hiệu suất Kho</div>
        </div>
    
        <div class="menu-section">
            <div class="menu-title">⚙️ Danh mục</div>
            <div class="menu-item" data-tab="master-warehouse">Kho</div>
            <div class="menu-item" data-tab="master-location">Vị trí lưu kho</div>
            <div class="menu-item" data-tab="master-supplier">Nhà cung cấp</div>
        </div>
    </div>

<!-- Main Content -->
<div class="content">
        <header>
            <div>
                <span style="font-size: 18px;">Hệ thống Quản lý Kho</span>
            </div>
            <div class="header-info">
                <span>📅 14/10/2025</span>
                <span>👤 Nguyễn Văn A (TO-KHO)</span>
                <span style="cursor: pointer;">🔔 (3)</span>
            </div>
        </header>
    
        <div class="main-content">
    
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Dashboard Tổng quan</h1>
                        <div class="breadcrumb">Trang chủ / Dashboard</div>
                    </div>
                    <div class="header-actions">
                        <button class="btn-secondary">
                            📊 Xuất báo cáo
                        </button>
                        <button class="btn-secondary">
                            🔄 Làm mới
                        </button>
                    </div>
                </div>
    
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-header">
                            <span class="stat-title">Tổng mã hàng tồn kho</span>
                            <div class="stat-icon blue">📦</div>
                        </div>
                        <div class="stat-value">1,248</div>
                        <div class="stat-change up">↑ 12% so với tháng trước</div>
                    </div>
    
                    <div class="stat-card orange">
                        <div class="stat-header">
                            <span class="stat-title">Chờ kiểm tra QC</span>
                            <div class="stat-icon orange">🔍</div>
                        </div>
                        <div class="stat-value">15</div>
                        <div class="stat-change">8 phiếu hôm nay</div>
                    </div>
    
                    <div class="stat-card green">
                        <div class="stat-header">
                            <span class="stat-title">Xuất kho hôm nay</span>
                            <div class="stat-icon green">📤</div>
                        </div>
                        <div class="stat-value">45</div>
                        <div class="stat-change up">↑ 18 phiếu</div>
                    </div>
    
                    <div class="stat-card red">
                        <div class="stat-header">
                            <span class="stat-title">Cảnh báo tồn thấp</span>
                            <div class="stat-icon red">⚠️</div>
                        </div>
                        <div class="stat-value">12</div>
                        <div class="stat-change">Cần đặt hàng gấp</div>
                    </div>
                </div>
    
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-header">
                            <span class="stat-title">Độ chính xác tồn kho</span>
                            <div class="stat-icon blue">✅</div>
                        </div>
                        <div class="stat-value">99.2%</div>
                        <div class="stat-change up">🎯 Target: ≥ 99.5%</div>
                    </div>
    
                    <div class="stat-card green">
                        <div class="stat-header">
                            <span class="stat-title">Tỷ lệ OTIF</span>
                            <div class="stat-icon green">🚚</div>
                        </div>
                        <div class="stat-value">96.5%</div>
                        <div class="stat-change up">↑ 2% so với tháng trước</div>
                    </div>
    
                    <div class="stat-card orange">
                        <div class="stat-header">
                            <span class="stat-title">Tuân thủ FEFO</span>
                            <div class="stat-icon orange">📋</div>
                        </div>
                        <div class="stat-value">98.1%</div>
                        <div class="stat-change up">🎯 Target: ≥ 98%</div>
                    </div>
    
                    <div class="stat-card red">
                        <div class="stat-header">
                            <span class="stat-title">Hàng hư hỏng/mất mát</span>
                            <div class="stat-icon red">📉</div>
                        </div>
                        <div class="stat-value">0.25%</div>
                        <div class="stat-change up">🎯 Target: ≤ 0.3%</div>
                    </div>
                </div>
    
                <!-- Recent Activities -->
                <div class="content-card">
                    <div class="section-title">Hoạt động gần đây</div>
                    <table>
                        <thead>
                        <tr>
                                <th style="width: 140px;">Số phiếu</th>
                                <th style="width: 180px;">Loại nghiệp vụ</th>
                                <th style="width: 100px;">Kho</th>
                                <th style="width: 140px;">Ngày tạo</th>
                                <th style="width: 150px;">Người xử lý</th>
                                <th style="width: 140px;">Trạng thái</th>
                                <th>Ghi chú</th>
                            </tr>
                    </thead>
                        <tbody>
                        <tr>
                                <td><span class="doc-code">PN-2025-0892</span></td>
                                <td>Nhập NVL từ NCC</td>
                                <td>ZN-WHRM-01</td>
                                <td>14/10/2025 09:30</td>
                                <td>Nguyễn Văn A</td>
                                <td><span class="status-badge wait">CHỜ KIỂM TRA</span></td>
                                <td>Lô gạo 500kg từ NCC Đại Phát</td>
                            </tr>
                        <tr>
                                <td><span class="doc-code">PX-2025-1523</span></td>
                                <td>Xuất NVL cho SX</td>
                                <td>ZN-WHRM-01</td>
                                <td>14/10/2025 08:15</td>
                                <td>Trần Thị B</td>
                                <td><span class="status-badge success">HOÀN THÀNH</span></td>
                                <td>Cấp phát cho PH-SXU</td>
                            </tr>
                        <tr>
                                <td><span class="doc-code">YCVT-2025-0156</span></td>
                                <td>Yêu cầu Vật tư</td>
                                <td>ZN-WHSP-01</td>
                                <td>13/10/2025 16:20</td>
                                <td>Lê Văn C</td>
                                <td><span class="status-badge processing">ĐANG XỬ LÝ</span></td>
                                <td>Yêu cầu bao bì 500g</td>
                            </tr>
                        <tr>
                                <td><span class="doc-code">QC-2025-0089</span></td>
                                <td>Kiểm tra QC</td>
                                <td>ZN-WHRM-01</td>
                                <td>13/10/2025 14:00</td>
                                <td>Phạm Thị D (TO-QAC)</td>
                                <td><span class="status-badge success">ĐẠT</span></td>
                                <td>Lô MAIN_gao01-20251013</td>
                            </tr>
                        <tr>
                                <td><span class="doc-code">SPKPH-2025-003</span></td>
                                <td>SPKPH</td>
                                <td>ZN-WHRM-01</td>
                                <td>13/10/2025 11:30</td>
                                <td>Hoàng Văn E (TO-QAC)</td>
                                <td><span class="status-badge danger">KHÔNG ĐẠT</span></td>
                                <td>Gia vị lỗi - Thương lượng NCC</td>
                            </tr>
                    </tbody>
                    </table>
                </div>
            </div>
    
            <!-- Inventory Tab -->
            <div class="tab-content" id="inventory">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Danh sách Hàng hóa</h1>
                        <div class="breadcrumb">Quản lý Tồn kho / Danh sách hàng hóa</div>
                    </div>
                    <div class="header-actions">
                        <button class="btn-secondary">
                            📤 Xuất Excel
                        </button>
                        <button class="btn-add" id="addProductBtn">
                             Thêm hàng hóa
                        </button>
                    </div>
                </div>
    
                <div class="content-card">
                    <div class="toolbar">
                        <div class="search-box">
                            <span class="search-icon">🔍</span>
                            <input type="text" placeholder="Tìm theo mã hàng, tên hàng, lot/batch...">
                        </div>
                        <div class="filter-group">
                            <select class="form-select" style="width: 180px;">
                                <option value="">Tất cả kho</option>
                                <option value="ZN-WHRM-01">ZN-WHRM-01 (NVL)</option>
                                <option value="ZN-WHSP-01">ZN-WHSP-01 (Vật tư)</option>
                                <option value="ZN-WHSF-01">ZN-WHSF-01 (Bán TP)</option>
                                <option value="ZN-WHFG-01">ZN-WHFG-01 (Thành phẩm)</option>
                                <option value="ZN-WHDC-01">ZN-WHDC-01 (Phân phối)</option>
                            </select>
                            <button class="filter-btn active">Tất cả</button>
                            <button class="filter-btn">Sẵn sàng</button>
                            <button class="filter-btn">Tồn thấp</button>
                            <button class="filter-btn">Hết hàng</button>
                        </div>
                    </div>
    
                    <table>
                        <thead>
                        <tr>
                                <th style="width: 40px;"><input type="checkbox"></th>
                                <th style="width: 140px;">Mã hàng</th>
                                <th style="width: 220px;">Tên hàng</th>
                                <th style="width: 120px;">Nhóm</th>
                                <th style="width: 100px;">Tồn khả dụng</th>
                                <th style="width: 80px;">Chờ QC</th>
                                <th style="width: 80px;">Cách ly</th>
                                <th style="width: 180px;">Vị trí</th>
                                <th style="width: 120px;">Trạng thái</th>
                                <th style="width: 100px;">Thao tác</th>
                            </tr>
                    </thead>
                        <tbody>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td><span class="doc-code">MAIN_gao01</span></td>
                                <td>Gạo nếp hạt ngắn</td>
                                <td>NVL chính</td>
                                <td style="text-align: right; font-weight: 500;">1,250 kg</td>
                                <td style="text-align: right;">0</td>
                                <td style="text-align: right;">0</td>
                                <td>ZN-WHRM-01-D01-03-02</td>
                                <td><span class="status-badge success">🟢 Sẵn sàng</span></td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn-view" title="Xem">👁️</button>
                                        <button class="btn-edit" title="Sửa">✎</button>
                                    </div>
                                </td>
                            </tr>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td><span class="doc-code">PKG1_bao500</span></td>
                                <td>Bao 500g in logo</td>
                                <td>Bao bì</td>
                                <td style="text-align: right; font-weight: 500;">5,000 cái</td>
                                <td style="text-align: right;">0</td>
                                <td style="text-align: right;">0</td>
                                <td>ZN-WHSP-01-A01-02-01</td>
                                <td><span class="status-badge warning">🟡 Tồn thấp</span></td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn-view" title="Xem">👁️</button>
                                        <button class="btn-edit" title="Sửa">✎</button>
                                    </div>
                                </td>
                            </tr>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td><span class="doc-code">SPIC_gia01</span></td>
                                <td>Hạt nêm 1kg</td>
                                <td>Gia vị</td>
                                <td style="text-align: right; font-weight: 500;">0 kg</td>
                                <td style="text-align: right;">0</td>
                                <td style="text-align: right;">0</td>
                                <td>-</td>
                                <td><span class="status-badge danger">🔴 Hết hàng</span></td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn-view" title="Xem">👁️</button>
                                        <button class="btn-edit" title="Sửa">✎</button>
                                    </div>
                                </td>
                            </tr>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td><span class="doc-code">PROT_thit01</span></td>
                                <td>Thịt heo xay</td>
                                <td>NVL chính</td>
                                <td style="text-align: right; font-weight: 500;">320 kg</td>
                                <td style="text-align: right;">50 kg</td>
                                <td style="text-align: right;">0</td>
                                <td>ZN-WHRM-01-C02-01-01</td>
                                <td><span class="status-badge success">🟢 Sẵn sàng</span></td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn-view" title="Xem">👁️</button>
                                        <button class="btn-edit" title="Sửa">✎</button>
                                    </div>
                                </td>
                            </tr>
                    </tbody>
                    </table>
                </div>
            </div>
    
            <!-- Receipt List Tab -->
            <div class="tab-content" id="receipt-list">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Danh sách Phiếu Nhập kho</h1>
                        <div class="breadcrumb">Nhập kho / Danh sách phiếu nhập</div>
                    </div>
                    <div class="header-actions">
                        <button class="btn-secondary">
                            📤 Xuất Excel
                        </button>
                        <button class="btn-add" id="createReceiptBtn">
                             Tạo phiếu nhập
                            <div class="dropdown-menu" id="receiptDropdown">
                                <div class="dropdown-item" data-type="receipt-ncc">📥 Nhập từ NCC</div>
                                <div class="dropdown-item" data-type="receipt-sx">🏭 Nhập TP từ Sản xuất</div>
                                <div class="dropdown-item" data-type="receipt-other">📦 Nhập khác</div>
                            </div>
                        </button>
                    </div>
                </div>
    
                <div class="content-card">
                    <div class="toolbar">
                        <div class="search-box">
                            <span class="search-icon">🔍</span>
                            <input type="text" placeholder="Tìm theo số phiếu, NCC, người nhập...">
                        </div>
                        <div class="filter-group">
                            <select class="form-select" style="width: 150px;">
                                <option value="">Tất cả kho</option>
                                <option value="ZN-WHRM-01">ZN-WHRM-01</option>
                                <option value="ZN-WHSP-01">ZN-WHSP-01</option>
                            </select>
                            <button class="filter-btn active">Tất cả</button>
                            <button class="filter-btn">Chờ QC</button>
                            <button class="filter-btn">Đã nhập</button>
                            <button class="filter-btn">Cách ly</button>
                        </div>
                    </div>
    
                    <table>
                        <thead>
                        <tr>
                                <th style="width: 40px;"><input type="checkbox"></th>
                                <th style="width: 140px;">Số phiếu</th>
                                <th style="width: 110px;">Ngày nhập</th>
                                <th style="width: 150px;">Loại nhập</th>
                                <th style="width: 120px;">Kho nhận</th>
                                <th style="width: 180px;">NCC/Nguồn</th>
                                <th style="width: 100px;">Tổng SL</th>
                                <th style="width: 140px;">Trạng thái</th>
                                <th>Ghi chú</th>
                                <th style="width: 100px;">Thao tác</th>
                            </tr>
                    </thead>
                        <tbody>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td><span class="doc-code">PN-2025-0892</span></td>
                                <td>14/10/2025</td>
                                <td>Nhập từ NCC</td>
                                <td>ZN-WHRM-01</td>
                                <td>NCC Đại Phát</td>
                                <td style="text-align: right;">500 kg</td>
                                <td><span class="status-badge wait">CHỜ KIỂM TRA</span></td>
                                <td>Lô gạo nếp</td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn-view" title="Xem">👁️</button>
                                        <button class="btn-edit" title="Sửa">✎</button>
                                    </div>
                                </td>
                            </tr>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td><span class="doc-code">PN-2025-0891</span></td>
                                <td>13/10/2025</td>
                                <td>Nhập TP từ SX</td>
                                <td>ZN-WHFG-01</td>
                                <td>Phòng Sản xuất</td>
                                <td style="text-align: right;">2,000 gói</td>
                                <td><span class="status-badge success">ĐÃ NHẬP KHO</span></td>
                                <td>Bánh gạo 100g</td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn-view" title="Xem">👁️</button>
                                    </div>
                                </td>
                            </tr>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td><span class="doc-code">PN-2025-0890</span></td>
                                <td>12/10/2025</td>
                                <td>Nhập từ NCC</td>
                                <td>ZN-WHSP-01</td>
                                <td>NCC Bao bì Việt</td>
                                <td style="text-align: right;">10,000 cái</td>
                                <td><span class="status-badge danger">CÁCH LY</span></td>
                                <td>Bao bì lỗi in</td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn-view" title="Xem">👁️</button>
                                        <button class="btn-edit" title="Sửa">✎</button>
                                    </div>
                                </td>
                            </tr>
                    </tbody>
                    </table>
                </div>
            </div>
    
            <!-- Issue List Tab -->
            <div class="tab-content" id="issue-list">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Danh sách Phiếu Xuất kho</h1>
                        <div class="breadcrumb">Xuất kho / Danh sách phiếu xuất</div>
                    </div>
                    <div class="header-actions">
                        <button class="btn-secondary">
                            📤 Xuất Excel
                        </button>
                        <button class="btn-add" id="createIssueBtn">
                             Tạo phiếu xuất
                            <div class="dropdown-menu" id="issueDropdown">
                                <div class="dropdown-item" data-type="issue-production">🏭 Xuất NVL cho SX</div>
                                <div class="dropdown-item" data-type="issue-sale">🛒 Xuất TP bán hàng</div>
                                <div class="dropdown-item" data-type="issue-transfer">🚚 Xuất chuyển kho</div>
                            </div>
                        </button>
                    </div>
                </div>
    
                <div class="content-card">
                    <div class="toolbar">
                        <div class="search-box">
                            <span class="search-icon">🔍</span>
                            <input type="text" placeholder="Tìm theo số phiếu, nơi nhận, người xuất...">
                        </div>
                        <div class="filter-group">
                            <button class="filter-btn active">Tất cả</button>
                            <button class="filter-btn">Đang xử lý</button>
                            <button class="filter-btn">Đã xuất</button>
                            <button class="filter-btn">Đã hủy</button>
                        </div>
                    </div>
    
                    <table>
                        <thead>
                        <tr>
                                <th style="width: 40px;"><input type="checkbox"></th>
                                <th style="width: 140px;">Số phiếu</th>
                                <th style="width: 110px;">Ngày xuất</th>
                                <th style="width: 150px;">Loại xuất</th>
                                <th style="width: 120px;">Kho xuất</th>
                                <th style="width: 180px;">Nơi nhận</th>
                                <th style="width: 100px;">Tổng SL</th>
                                <th style="width: 140px;">Trạng thái</th>
                                <th>Ghi chú</th>
                                <th style="width: 100px;">Thao tác</th>
                            </tr>
                    </thead>
                        <tbody>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td><span class="doc-code">PX-2025-1523</span></td>
                                <td>14/10/2025</td>
                                <td>Xuất NVL cho SX</td>
                                <td>ZN-WHRM-01</td>
                                <td>PH-SXU</td>
                                <td style="text-align: right;">150 kg</td>
                                <td><span class="status-badge success">ĐÃ XUẤT</span></td>
                                <td>Gạo theo FEFO</td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn-view" title="Xem">👁️</button>
                                    </div>
                                </td>
                            </tr>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td><span class="doc-code">PX-2025-1522</span></td>
                                <td>14/10/2025</td>
                                <td>Xuất TP bán hàng</td>
                                <td>ZN-WHDC-01</td>
                                <td>NPP Hà Nội</td>
                                <td style="text-align: right;">5,000 gói</td>
                                <td><span class="status-badge processing">ĐANG XỬ LÝ</span></td>
                                <td>Đơn hàng #DH-2025-456</td>
                                <td>
                                    <div class="action-btns">
                                        <button class="btn-view" title="Xem">👁️</button>
                                        <button class="btn-edit" title="Sửa">✎</button>
                                    </div>
                                </td>
                            </tr>
                    </tbody>
                    </table>
                </div>
            </div>
    
            <!-- QC Queue Tab -->
            <div class="tab-content" id="qc-queue">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Queue Kiểm tra QC</h1>
                        <div class="breadcrumb">Kiểm tra QC / Queue kiểm tra</div>
                    </div>
                    <div class="header-actions">
                        <button class="btn-secondary">
                            🔔 Thông báo (3)
                        </button>
                    </div>
                </div>
    
                <div class="content-card">
                    <div class="info-box">
                        <strong>🔍 Quy trình kiểm tra QC:</strong>
                        Hàng từ NCC → Dán nhãn VÀNG "CHỜ KIỂM TRA" → Lấy mẫu kiểm tra → ĐẠT: Nhập kho | KHÔNG ĐẠT: Cách ly & SPKPH
                    </div>
    
                    <table>
                        <thead>
                        <tr>
                                <th style="width: 140px;">Số phiếu nhập</th>
                                <th style="width: 110px;">Ngày nhập</th>
                                <th style="width: 180px;">Mã hàng</th>
                                <th style="width: 200px;">Tên hàng</th>
                                <th style="width: 140px;">Lot/Batch</th>
                                <th style="width: 100px;">Số lượng</th>
                                <th style="width: 120px;">NCC</th>
                                <th style="width: 140px;">Ưu tiên</th>
                                <th style="width: 100px;">Thao tác</th>
                            </tr>
                    </thead>
                        <tbody>
                        <tr style="background: #fff3cd;">
                                <td><span class="doc-code">PN-2025-0892</span></td>
                                <td>14/10/2025</td>
                                <td><strong>MAIN_gao01</strong></td>
                                <td>Gạo nếp hạt ngắn</td>
                                <td>20251014</td>
                                <td style="text-align: right;">500 kg</td>
                                <td>NCC Đại Phát</td>
                                <td><span class="status-badge warning">🔥 CAO</span></td>
                                <td>
                                    <button class="btn-add" style="padding: 6px 12px; font-size: 12px;" onclick="openQCModal('PN-2025-0892')">
                                        Kiểm tra
                                    </button>
                                </td>
                            </tr>
                        <tr>
                                <td><span class="doc-code">PN-2025-0889</span></td>
                                <td>13/10/2025</td>
                                <td><strong>SPIC_gia02</strong></td>
                                <td>Muối tinh 500g</td>
                                <td>20251013</td>
                                <td style="text-align: right;">100 kg</td>
                                <td>NCC Gia vị VN</td>
                                <td><span class="status-badge info">BÌNH THƯỜNG</span></td>
                                <td>
                                    <button class="btn-add" style="padding: 6px 12px; font-size: 12px;" onclick="openQCModal('PN-2025-0889')">
                                        Kiểm tra
                                    </button>
                                </td>
                            </tr>
                    </tbody>
                    </table>
                </div>
            </div>
    
        </div>
    </div>

<!-- Modal: Tạo Phiếu Nhập từ NCC -->
<div class="modal-overlay" id="receiptNCCModal">
        <div class="modal">
            <div class="modal-header">
                <h2>📥 Tạo Phiếu Nhập kho từ NCC</h2>
                <button class="modal-close" onclick="closeModal('receiptNCCModal')">×</button>
            </div>
    
            <div class="modal-body">
                <form id="receiptNCCForm">
                    <div class="section-title">Thông tin chung</div>
    
                    <div class="info-box">
                        <strong>📌 Lưu ý:</strong> Hàng nhập từ NCC sẽ tự động chuyển vào trạng thái "CHỜ KIỂM TRA" và thông báo cho TO-QAC.
                    </div>
    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Loại nhập <span class="required">*</span></label>
                            <select class="form-select" required>
                                <option value="ncc">Nhập từ NCC</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Ngày nhập <span class="required">*</span></label>
                            <input type="date" class="form-input" value="2025-10-14" required>
                        </div>
                    </div>
    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Kho nhận <span class="required">*</span></label>
                            <select class="form-select" required>
                                <option value="">Chọn kho nhận</option>
                                <option value="ZN-WHRM-01">ZN-WHRM-01 - Kho Nguyên vật liệu</option>
                                <option value="ZN-WHSP-01">ZN-WHSP-01 - Kho Vật tư & Phụ tùng</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Nhà cung cấp <span class="required">*</span></label>
                            <div class="input-with-action">
                                <select class="form-select" required>
                                    <option value="">Chọn nhà cung cấp</option>
                                    <option value="NCC001">NCC Đại Phát</option>
                                    <option value="NCC002">NCC Thành Công</option>
                                    <option value="NCC003">NCC Gia vị Việt Nam</option>
                                </select>
                                <button type="button" class="btn-icon" title="Thêm NCC mới"></button>
                            </div>
                        </div>
                    </div>
    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Số PO</label>
                            <input type="text" class="form-input" placeholder="Nhập số Purchase Order (nếu có)">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Người nhập kho <span class="required">*</span></label>
                            <input type="text" class="form-input" value="Nguyễn Văn A (TO-KHO)" disabled>
                        </div>
                    </div>
    
                    <div class="form-row full">
                        <div class="form-group">
                            <label class="form-label">Ghi chú</label>
                            <textarea class="form-input" rows="2" placeholder="Nhập ghi chú về lô hàng..."></textarea>
                        </div>
                    </div>
    
                    <div class="section-title" style="margin-top: 24px;">Chi tiết hàng hóa</div>
    
                    <table class="detail-table">
                        <thead>
                        <tr>
                                <th style="width: 50px;">STT</th>
                                <th style="width: 140px;">Mã hàng</th>
                                <th style="width: 200px;">Tên hàng</th>
                                <th style="width: 120px;">Lot/Batch <span class="required">*</span></th>
                                <th style="width: 100px;">NSX</th>
                                <th style="width: 100px;">HSD</th>
                                <th style="width: 100px;">Số lượng</th>
                                <th style="width: 80px;">ĐVT</th>
                                <th style="width: 120px;">Vị trí</th>
                                <th style="width: 60px;"></th>
                            </tr>
                    </thead>
                        <tbody id="receiptDetailBody">
                        <tr>
                                <td colspan="10" style="text-align: center; color: #999; padding: 20px;">
                                    Chưa có dữ liệu. Nhấn "Thêm dòng" để thêm hàng hóa.
                                </td>
                            </tr>
                    </tbody>
                    </table>
                    <button type="button" class="btn-add-row" onclick="addReceiptDetailRow()">
                         Thêm dòng
                    </button>
                </form>
            </div>
    
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="closeModal('receiptNCCModal')">Hủy</button>
                <button type="button" class="btn-save-add">Lưu và thêm mới</button>
                <button type="button" class="btn-save">Lưu phiếu nhập</button>
            </div>
        </div>
    </div>

<!-- Modal: Tạo Phiếu Xuất NVL cho SX (FEFO) -->
<div class="modal-overlay" id="issueProductionModal">
        <div class="modal">
            <div class="modal-header">
                <h2>📤 Tạo Phiếu Xuất NVL cho Sản xuất</h2>
                <button class="modal-close" onclick="closeModal('issueProductionModal')">×</button>
            </div>
    
            <div class="modal-body">
                <form id="issueProductionForm">
                    <div class="section-title">Thông tin chung</div>
    
                    <div class="info-box">
                        <strong>📌 Nguyên tắc FEFO:</strong> Hệ thống sẽ tự động đề xuất lot/batch có HSD gần nhất để xuất trước.
                    </div>
    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Loại xuất <span class="required">*</span></label>
                            <select class="form-select" required>
                                <option value="production">Xuất NVL cho Sản xuất</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Ngày xuất <span class="required">*</span></label>
                            <input type="date" class="form-input" value="2025-10-14" required>
                        </div>
                    </div>
    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Kho xuất <span class="required">*</span></label>
                            <select class="form-select" required>
                                <option value="">Chọn kho xuất</option>
                                <option value="ZN-WHRM-01" selected>ZN-WHRM-01 - Kho Nguyên vật liệu</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Nơi nhận <span class="required">*</span></label>
                            <select class="form-select" required>
                                <option value="">Chọn nơi nhận</option>
                                <option value="PH-SXU" selected>PH-SXU - Phòng Sản xuất</option>
                            </select>
                        </div>
                    </div>
    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Liên kết YCVT</label>
                            <input type="text" class="form-input" placeholder="YCVT-2025-0156 (nếu có)">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Người xuất kho <span class="required">*</span></label>
                            <input type="text" class="form-input" value="Nguyễn Văn A (TO-KHO)" disabled>
                        </div>
                    </div>
    
                    <div class="section-title" style="margin-top: 24px;">Chi tiết xuất kho (FEFO)</div>
    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Chọn mã hàng <span class="required">*</span></label>
                            <select class="form-select" id="selectProduct" onchange="showFEFOSuggestion()">
                                <option value="">-- Chọn mã hàng --</option>
                                <option value="MAIN_gao01">MAIN_gao01 - Gạo nếp hạt ngắn</option>
                                <option value="PROT_thit01">PROT_thit01 - Thịt heo xay</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Số lượng cần xuất <span class="required">*</span></label>
                            <input type="number" class="form-input" id="quantityNeeded" placeholder="Nhập số lượng" min="1">
                        </div>
                    </div>
    
                    <div class="fefo-suggestion" id="fefoBox" style="display: none;">
                        <strong>🎯 HỆ THỐNG ĐỀ XUẤT THEO FEFO:</strong>
                        <div class="fefo-item">
                            <strong>Lot 1:</strong> 20251006 - HSD: 06/10/2026 - Tồn: 500 kg - Vị trí: ZN-WHRM-01-D01-03-02
                        </div>
                        <div class="fefo-item">
                            <strong>Lot 2:</strong> 20251010 - HSD: 10/10/2026 - Tồn: 750 kg - Vị trí: ZN-WHRM-01-D01-04-01
                        </div>
                    </div>
    
                    <table class="detail-table" id="issueDetailTable" style="display: none;">
                        <thead>
                        <tr>
                                <th style="width: 50px;">STT</th>
                                <th style="width: 140px;">Mã hàng</th>
                                <th style="width: 120px;">Lot/Batch</th>
                                <th style="width: 100px;">HSD</th>
                                <th style="width: 100px;">SL xuất</th>
                                <th style="width: 80px;">ĐVT</th>
                                <th style="width: 180px;">Vị trí</th>
                                <th style="width: 120px;">Người nhận SX</th>
                                <th style="width: 60px;"></th>
                            </tr>
                    </thead>
                        <tbody id="issueDetailBody">
                    </tbody>
                    </table>
                </form>
            </div>
    
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="closeModal('issueProductionModal')">Hủy</button>
                <button type="button" class="btn-save">Tạo phiếu xuất</button>
            </div>
        </div>
    </div>

<!-- Modal: Kiểm tra QC -->
<div class="modal-overlay" id="qcModal">
        <div class="modal">
            <div class="modal-header">
                <h2>🔍 Form Kiểm tra Chất lượng (QC)</h2>
                <button class="modal-close" onclick="closeModal('qcModal')">×</button>
            </div>
    
            <div class="modal-body">
                <form id="qcForm">
                    <div class="section-title">Thông tin phiếu nhập</div>
    
                    <div class="lot-info">
                        <div class="lot-item">
                            <strong>Số phiếu nhập:</strong>
                            <span>PN-2025-0892</span>
                        </div>
                        <div class="lot-item">
                            <strong>Mã hàng:</strong>
                            <span>MAIN_gao01</span>
                        </div>
                        <div class="lot-item">
                            <strong>Lot/Batch:</strong>
                            <span>20251014</span>
                        </div>
                        <div class="lot-item">
                            <strong>Số lượng:</strong>
                            <span>500 kg</span>
                        </div>
                        <div class="lot-item">
                            <strong>NCC:</strong>
                            <span>NCC Đại Phát</span>
                        </div>
                    </div>
    
                    <div class="section-title" style="margin-top: 24px;">Tiêu chí kiểm tra</div>
    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Người kiểm tra <span class="required">*</span></label>
                            <input type="text" class="form-input" value="Phạm Thị D (TO-QAC)" disabled>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Ngày giờ kiểm tra <span class="required">*</span></label>
                            <input type="datetime-local" class="form-input" value="2025-10-14T10:30" required>
                        </div>
                    </div>
    
                    <table class="detail-table">
                        <thead>
                        <tr>
                                <th style="width: 50px;">STT</th>
                                <th style="width: 250px;">Tiêu chí</th>
                                <th style="width: 150px;">Tiêu chuẩn</th>
                                <th style="width: 150px;">Thực tế</th>
                                <th style="width: 120px;">Kết quả</th>
                                <th>Ghi chú</th>
                            </tr>
                    </thead>
                        <tbody>
                        <tr>
                                <td style="text-align: center;">1</td>
                                <td>Độ ẩm</td>
                                <td>≤ 14%</td>
                                <td><input type="text" class="form-input" placeholder="Nhập giá trị"></td>
                                <td>
                                    <select class="form-select">
                                        <option value="">Chọn</option>
                                        <option value="pass">✅ ĐẠT</option>
                                        <option value="fail">❌ KHÔNG ĐẠT</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-input" placeholder="Ghi chú"></td>
                            </tr>
                        <tr>
                                <td style="text-align: center;">2</td>
                                <td>Màu sắc</td>
                                <td>Trắng ngà tự nhiên</td>
                                <td><input type="text" class="form-input" placeholder="Nhập đánh giá"></td>
                                <td>
                                    <select class="form-select">
                                        <option value="">Chọn</option>
                                        <option value="pass">✅ ĐẠT</option>
                                        <option value="fail">❌ KHÔNG ĐẠT</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-input" placeholder="Ghi chú"></td>
                            </tr>
                        <tr>
                                <td style="text-align: center;">3</td>
                                <td>Mùi vị</td>
                                <td>Không có mùi lạ</td>
                                <td><input type="text" class="form-input" placeholder="Nhập đánh giá"></td>
                                <td>
                                    <select class="form-select">
                                        <option value="">Chọn</option>
                                        <option value="pass">✅ ĐẠT</option>
                                        <option value="fail">❌ KHÔNG ĐẠT</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-input" placeholder="Ghi chú"></td>
                            </tr>
                        <tr>
                                <td style="text-align: center;">4</td>
                                <td>Tạp chất</td>
                                <td>≤ 0.1%</td>
                                <td><input type="text" class="form-input" placeholder="Nhập giá trị"></td>
                                <td>
                                    <select class="form-select">
                                        <option value="">Chọn</option>
                                        <option value="pass">✅ ĐẠT</option>
                                        <option value="fail">❌ KHÔNG ĐẠT</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-input" placeholder="Ghi chú"></td>
                            </tr>
                    </tbody>
                    </table>
    
                    <div class="section-title" style="margin-top: 24px;">Kết luận</div>
    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Kết quả tổng thể <span class="required">*</span></label>
                            <select class="form-select" id="qcResult" required>
                                <option value="">-- Chọn kết quả --</option>
                                <option value="pass">✅ ĐẠT - Cho phép nhập kho</option>
                                <option value="fail">❌ KHÔNG ĐẠT - Cách ly & lập SPKPH</option>
                            </select>
                        </div>
                    </div>
    
                    <div class="form-row full">
                        <div class="form-group">
                            <label class="form-label">Nhận xét chung</label>
                            <textarea class="form-input" rows="3" placeholder="Nhập nhận xét, đề xuất xử lý..."></textarea>
                        </div>
                    </div>
                </form>
            </div>
    
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="closeModal('qcModal')">Hủy</button>
                <button type="button" class="btn-save" onclick="submitQC()">Lưu kết quả QC</button>
            </div>
        </div>
    </div>

<script>
        $(document).ready(function() {
                // Toggle menu
                    $('.menu-title').on('click', function() {
                            $(this).parent().toggleClass('active');
                        });
        
                    // Switch tabs
                        $('.menu-item').on('click', function() {
                                if (!$(this).hasClass('active')) {
                                        $('.menu-item').removeClass('active');
                                        $(this).addClass('active');
                        
                                            const tabId = $(this).data('tab');
                                        $('.tab-content').removeClass('active');
                                        $('#'  tabId).addClass('active');
                                    }
                            });
        
                    // Dropdown menus
                        $('#createReceiptBtn').on('click', function(e) {
                                e.stopPropagation();
                                $('#receiptDropdown').toggleClass('active');
                                $('#issueDropdown').removeClass('active');
                            });
        
                    $('#createIssueBtn').on('click', function(e) {
                            e.stopPropagation();
                            $('#issueDropdown').toggleClass('active');
                            $('#receiptDropdown').removeClass('active');
                        });
        
                    $(document).on('click', function() {
                            $('.dropdown-menu').removeClass('active');
                        });
        
                    // Open modals from dropdown
                        $('.dropdown-item').on('click', function() {
                                const type = $(this).data('type');
                                $('.dropdown-menu').removeClass('active');
                    
                                    if (type === 'receipt-ncc') {
                                        $('#receiptNCCModal').addClass('active');
                                    } else if (type === 'issue-production') {
                                        $('#issueProductionModal').addClass('active');
                                    }
                            });
            });
    
            // Modal functions
                function closeModal(modalId) {
                        $('#'  modalId).removeClass('active');
                    }
    
        // FEFO Suggestion
            function showFEFOSuggestion() {
                    const product = $('#selectProduct').val();
                    if (product) {
                            $('#fefoBox').show();
                            $('#issueDetailTable').show();
                        } else {
                            $('#fefoBox').hide();
                            $('#issueDetailTable').hide();
                        }
                }
    
        // Add receipt detail row
            let receiptRowCounter = 0;
        function addReceiptDetailRow() {
                receiptRowCounter;
                const html = `
            <tr>
                <td style="text-align: center;">${receiptRowCounter}</td>
                <td>
                    <select class="form-select">
                        <option value="">Chọn mã hàng</option>
                        <option value="MAIN_gao01">MAIN_gao01</option>
                        <option value="SPIC_gia01">SPIC_gia01</option>
                    </select>
                </td>
                <td><input type="text" class="form-input" placeholder="Tên hàng" readonly></td>
                <td><input type="text" class="form-input" placeholder="20251014" required></td>
                <td><input type="date" class="form-input" value="2025-10-14"></td>
                <td><input type="date" class="form-input" value="2026-10-14"></td>
                <td><input type="number" class="form-input" placeholder="0" min="1"></td>
                <td><input type="text" class="form-input" placeholder="kg" readonly></td>
                <td>
                    <select class="form-select">
                        <option value="">Chọn vị trí</option>
                        <option value="ZN-WHRM-01-D01-03-02">ZN-WHRM-01-D01-03-02</option>
                    </select>
                </td>
                <td style="text-align: center;">
                    <button type="button" class="btn-delete-row" onclick="$(this).closest('tr').remove()">×</button>
                </td>
            </tr>
        `;
        
                    if ($('#receiptDetailBody tr').length === 1 && $('#receiptDetailBody tr td').attr('colspan')) {
                        $('#receiptDetailBody').html(html);
                    } else {
                        $('#receiptDetailBody').append(html);
                    }
            }
    
        // Open QC Modal
            function openQCModal(docNumber) {
                    $('#qcModal').addClass('active');
                }
    
        // Submit QC
            function submitQC() {
                    const result = $('#qcResult').val();
                    if (!result) {
                            alert('Vui lòng chọn kết quả kiểm tra!');
                            return;
                        }
            
                        if (result === 'pass') {
                            alert('✅ Đã lưu kết quả QC: ĐẠT\nHàng được chuyển sang trạng thái "ĐÃ NHẬP KHO"');
                        } else {
                            alert('❌ Đã lưu kết quả QC: KHÔNG ĐẠT\nHàng được chuyển sang "CÁCH LY" và tự động tạo SPKPH');
                        }
            
                        closeModal('qcModal');
                }
    </script>

</body>
</html>
